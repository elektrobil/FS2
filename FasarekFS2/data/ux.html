<!DOCTYPE html>
<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css">
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
    <meta name='viewport' content='width=device-width,initial-scale=1'>
    <meta charset="UTF-8">
</head>

<body>
<main role='main'>
    <div class='container-fluid'>
        <div class='row'>
            <!-- TODO: Handle replacement tags like {{localDomain}} -->
            <div class='col-md-12'>
                <h4>cam.local &nbsp;<small><a href="/fs/list">File Manager</a></small></h4>

                <input id='stream' data-on='Stream ON' data-off='Disabled' type='checkbox'>
                <input id='timelapse' data-on='Timelapse ON' data-off='Disabled' type='checkbox'>


                <form id='f1' action='/capture' target='frame' method='GET'>
                    <div class='row' style="margin-top:.5em;margin-bottom:.5em">
                        <div class='col-md-12'>
                            <input type='submit' value='PHOTO' class='btn btn-lg btn-dark form-control'>
                        </div>
                    </div>
                </form>

                <iframe name='frame' width='100%' height='400' frameborder="0"></iframe>
                <div class='row'>
                    <div class='col-md-6'>
                        <button onclick="frame.location='/wifi/reset'"
                                class="btn btn-sm btn-danger"
                                title="Creates the CAM accesspoint so you can set up a new WiFi connection">Reset WiFi Credentials</button>
                    </div>
                    <div class='col-md-6'>
                        <button onclick="frame.location='/camera/settings'"
                                class="btn btn-sm btn-default form-control"
                                title="This option does not change WiFi settings but let's you edit Camera setup">Restart and edit Camera settings</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
</body>

<script>
    $(function () {
        $('#stream').bootstrapToggle({
            on: 'Stream ON', off: 'Stream OFF'
        });
        $('#stream').change(function() {
            if ($(this).prop('checked')) {
                frame.location = '/stream';
            } else {
                frame.location = '/stream/stop';
            }
        })
    });
    $(function () {
        $('#timelapse').bootstrapToggle({
            on: 'Timelapse ON', off: 'Timelapse OFF'
        });
        $('#timelapse').change(function() {
            if ($(this).prop('checked')) {
                frame.location = '/timelapse/start';
            } else {
                frame.location = '/timelapse/stop';
            }
        })
    });

</script>